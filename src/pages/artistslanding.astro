---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from 'astro:content';
const artists = await getCollection('artists');
---
<BaseLayout title="Artists" description="Meet our artists.">
  <div class="grid gap-6 sm:grid-cols-2">
    {artists.map(a => {
      const first = a.data.name.split(' ')[0];
      const bookHref = `/contact?artist=${encodeURIComponent(a.data.name)}`;
      return (
        <article class="card p-6">
          <h2 class="font-serif text-2xl">{a.data.name}</h2>
          <p class="text-white/70">{a.data.styles.join(', ')}</p>
          <div class="mt-3 flex items-center gap-3">
            <a class="underline" href={`/artists/${a.slug}`}>View portfolio â†—</a>
            <a class="inline-block px-3 py-1 rounded btn-cta" href={bookHref}>Book {first}</a>
          </div>
        </article>
      );
    })}
  </div>
</BaseLayout>
