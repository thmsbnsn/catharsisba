---
import BaseLayout from "../../layouts/BaseLayout.astro";
import ArtistCard from "../../components/ArtistCard.jsx";
import { getArtists } from "../../lib/data-sources";
import { imagePresets } from "../../lib/image-helpers";
import type { NormalizedArtist } from "../../lib/data-sources";

type ArtistCardData = NormalizedArtist & {
  profileImageUrl: string | null;
  profileImageAlt: string;
  profileImageLqip?: string;
};

const artists = await getArtists();

const artistData: ArtistCardData[] = artists.map((artist) => ({
  ...artist,
  profileImageUrl:
    imagePresets.card(artist.profileImage) || artist.profileImage?.url || null,
  profileImageAlt: `${artist.name} portrait`,
  profileImageLqip: artist.profileImage?.lqip,
}));
---

<BaseLayout
  title="Meet the Artists"
  description="Craft, intent, precision. Our artists, one standard."
>
  <section class="section-block">
    <div class="section-header">
      <div>
        <h1 class="section-heading">Meet the Artists</h1>
        <p class="section-subhead">
          Each artist crafts a personalized experienceâ€”custom design consults,
          jewelry styling, and a calm studio vibe that lets you exhale.
        </p>
      </div>
    </div>
    <div class="artist-grid">
      {artistData.map((artist) => <ArtistCard artist={artist} />)}
    </div>
  </section>
</BaseLayout>
